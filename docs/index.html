<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M3u8_Analyzer</title>
    <link rel="stylesheet" href="stylesheets/style.css">
    <link rel="shortcut icon" href="assets/logo.ico" type="image/x-icon">
</head>
<body>
    <header class="logo">
        <h1>M3u8_Analyzer</h1>
        <a href="https://github.com/PauloCesar-dev404/M3u8_Analyzer" target="_top">
        <img src="https://github.githubassets.com/favicons/favicon.svg" alt="GitHub Logo" style="width: 20px; height: 20px; margin-right: 8px;"><h3 style="color: rgb(94, 94, 94);">PauloCesar-dev404/M3u8_Analyzer</h3></a>
      
    </header>
    
    <div class="content">
        <!-- Menu com os métodos da biblioteca -->
        <div class="tabs">
            <button class="tab-button" onclick="openTab(event, 'install')">Instalação</button>
            <button class="tab-button" onclick="openTab(event, 'get_m3u8')">Obter Conteúdo de uma URL M3U8</button>
            <button class="tab-button" onclick="openTab(event, 'get_type_m3u8_content')">Obter o Tipo da Playlist</button>
            <button class="tab-button" onclick="openTab(event, 'get_high_resolution')">Obter Melhor Resolução</button>
            <button class="tab-button" onclick="openTab(event, 'get_player_playlist')">Obter Player</button>
            <button class="tab-button" onclick="openTab(event, 'get_audio_playlist')">Obter URL de Playlist de Áudio</button>
            <button class="tab-button" onclick="openTab(event, 'remuxer_audio_and_video')">Remuxar Áudio e Vídeo</button>
            <button class="tab-button" onclick="openTab(event, 'Como_obter_as_urls_de_streams')">Como obter as URLs de streams?</button>
            <button class="tab-button" onclick="openTab(event, 'get_url_key_m3u8')">Obter chave de criptografia AES-128 e o IV de um conteúdo M3U8</button>            
            <button class="tab-button" onclick="openTab(event, 'downloader_and_remuxer_segments')">Baixar uma playlist M3U8 segmentos por segmentos(suporte a descriptografia)</button>
            <button class="tab-button" onclick="openTab(event, 'ffmpeg')">usar ffmpeg para baixar uma Playlist M3U8</button>



        </div>

        <div id="get_url_key_m3u8" class="tab-content">
            <h1>Método:</h1>
            <h2><span class="func">EncryptSuport.get_url_key_m3u8</span><span class="opens">(</span><span class="param">m3u8_content</span>, <span class="param">player</span>, <span class="param">headers</span><span class="opens">)</span></h2>
            <p>Extrai a URL da chave de criptografia AES-128 e o IV de um conteúdo M3U8.</p>
            
            <p><strong>Parâmetros:</strong></p>
            <ul>
                <li><code>m3u8_content</code> (str): String contendo o conteúdo do arquivo M3U8.</li>
                <li><code>player</code> (str): URL base para formar o URL completo da chave, se necessário.</li>
                <li><code>headers</code> (dict, opcional): Cabeçalhos HTTP opcionais para a requisição da chave.</li>
            </ul>
            
            <p><strong>Retorno:</strong></p>
            <p><code>dict</code>: Um dicionário contendo a chave em hexadecimal e o IV (se disponível). A chave é retornada com a chave 'key', e o IV com a chave 'iv'.</p>
            
            <p><strong>Exemplo:</strong></p>
            <pre><code><span class="comment"># Exemplo de conteúdo M3U8</span>
        m3u8_content = """
        #EXTM3U
        #EXT-X-VERSION:3
        #EXT-X-TARGETDURATION:10
        #EXT-X-MEDIA-SEQUENCE:0
        #EXTINF:10.0,
        http://example.com/segment0.ts
        #EXTINF:10.0,
        http://example.com/segment1.ts
        #EXT-X-KEY:METHOD=AES-128,URI="http://example.com/key.key",IV=0x1234567890ABCDEF
        #EXTINF:10.0,
        http://example.com/segment2.ts
        """
        
        <span class="comment"># Obtendo a chave e o IV</span>
        result = <span class="func">EncryptSuport.get_url_key_m3u8</span>(<span class="param">m3u8_content</span>, 
                                                                           <span class="param">"http://example.com"</span>, 
                                                                           <span class="param">headers=<span class="dict">{"User-Agent": "my_agent"}</span></span>)
        print(result)  <span class="comment"># Saída: {'key': 'aabbccddeeff00112233445566778899', 'iv': '1234567890abcdef'}</span></code></pre>
            
            <p><strong>Detalhes do Método:</strong></p>
            <p>O método utiliza uma expressão regular para encontrar a URL da chave e o IV dentro do conteúdo M3U8. A URL da chave é formada combinando a URL base do player com a URL extraída do conteúdo M3U8. O método então faz uma requisição HTTP para obter o conteúdo da chave, converte-o para hexadecimal, e retorna um dicionário contendo a chave e o IV.</p>
            
            
            <p><strong>Notas Adicionais:</strong></p>
            <p>Se o IV não estiver disponível no conteúdo M3U8, o valor retornado será <code>None</code> para a chave 'iv'. Além disso, é importante garantir que a URL base fornecida seja a correta para a formação do URL da chave.</p>
        </div>
        

        <div id="downloader_and_remuxer_segments" class="tab-content">
            <h1>Método:</h1>
            <h2><span class="func">M3u8Analyzer.M3u8AnalyzerDownloader.downloader_and_remuxer_segments</span><span class="opens">(</span><span class="param">url_playlist</span>, <span class="param">output</span>, <span class="param">key_hex</span>, <span class="param">iv_hex</span>, <span class="param">player</span>, <span class="param">headers</span>, <span class="param">segmentsType</span><span class="opens">)</span></h2>
            <p>Baixa os segmentos de uma playlist M3U8 e os combina em um arquivo de vídeo. O método suporta descriptografia de segmentos se uma chave e IV forem fornecidos.</p>
            
            <p><strong>Parâmetros:</strong></p>
            <ul>
                <li><code>url_playlist</code> (str): URL da playlist de segmentos M3U8.</li>
                <li><code>output</code> (str): Caminho de saída para o vídeo final (por exemplo, <code>dir/nome.mp4</code>).</li>
                <li><code>key_hex</code> (str, opcional): Chave de descriptografia em formato hexadecimal.</li>
                <li><code>iv_hex</code> (str, opcional): IV (vetor de inicialização) em formato hexadecimal.</li>
                <li><code>player</code> (str, opcional): URL base para os segmentos, se necessário.</li>
                <li><code>headers</code> (dict, opcional): Cabeçalhos HTTP adicionais para as requisições.</li>
                <li><code>segmentsType</code> (str, opcional): Tipo de segmentos de saída. Se os segmentos forem do tipo '.m4s','.ts', o método ajusta a extensão dos arquivos temporários.</li>
            </ul>
            
            <p><strong>Retorno:</strong></p>
            <p><code>None</code>: O método não retorna valor, mas realiza o download e combinação dos segmentos em um único arquivo de vídeo.</p>
            
            <p><strong>Exemplo:</strong></p>
            <pre><code><span class="comment"># Baixando e remuxando segmentos</span>
        downloader_and_remuxer_segments(<span class="param">"http://example.com/playlist.m3u8"</span>, 
                                        <span class="param">"output/video.mp4"</span>, 
                                        <span class="param">key_hex=<span class="string">"your_key_hex"</span></span>, 
                                        <span class="param">iv_hex=<span class="string">"your_iv_hex"</span></span>, 
                                        <span class="param">player=<span class="string">"http://example.com/base_url"</span></span>, 
                                        <span class="param">headers=<span class="dict">{"User-Agent": "your_agent"}</span></span>, 
                                        <span class="param">segmentsType=<span class="string">".m4s"</span></span>)</code></pre>
            
            <p><strong>Detalhes do Método:</strong></p>
            <p>O método começa verificando se a URL da playlist é válida e, em seguida, faz uma requisição HTTP para obter o conteúdo da playlist. Os segmentos são baixados e salvos como arquivos temporários. Se chaves e IVs forem fornecidos, o método realiza a descriptografia dos segmentos. Após o download, os segmentos são combinados em um arquivo de vídeo usando um método auxiliar. O método também lida com exceções relacionadas a conexões e arquivos, e garante que os arquivos temporários sejam removidos após a conclusão.</p>
        </div>






        <div id="ffmpeg" class="tab-content">
            <h1>Método:</h1>
            <h2><span class="func">M3u8Analyzer.M3u8AnalyzerDownloader.ffmpeg</span><span class="opens">(</span><span class="param">input_url</span>, <span class="param">output</span>, <span class="param">type_playlist</span>, <span class="param">resolution</span><span class="opens">)</span></h2>
            <p>Baixa um vídeo ou áudio a partir de uma URL M3U8 utilizando o FFmpeg. Dependendo do tipo de playlist, o usuário pode especificar a resolução desejada.</p>
            
            <p><strong>Parâmetros:</strong></p>
            <ul>
                <li><code>input_url</code> (str): URL da playlist M3U8.</li>
                <li><code>output</code> (str): Caminho de saída para o vídeo ou áudio final (por exemplo, <code>dir/nome.mp4</code>).</li>
                <li><code>type_playlist</code> (str): Tipo da playlist ('audio' ou 'video').</li>
                <li><code>resolution</code> (str, opcional): Resolução desejada para download. Pode ser 'medium', 'lower', ou 'high'. Se não for especificada, 'high' é usada como padrão.</li>
            </ul>
            
            <p><strong>Retorno:</strong></p>
            <p><code>None</code>: O método não retorna valor, mas realiza o download do vídeo ou áudio especificado.</p>
        
            <p><strong>Exemplo:</strong></p>
            <pre><code><span class="comment"># Baixando um vídeo em alta resolução</span>
        ffmpeg(<span class="param">"http://exemplo.com/playlist.m3u8"</span>, <span class="param">"output/video.mp4"</span>, <span class="param">"video"</span>, <span class="param">"high"</span>)
        
        <span class="comment"># Baixando áudio com resolução padrão</span>
        ffmpeg(<span class="param">"http://exemplo.com/playlist.m3u8"</span>, <span class="param">"output/audio.mp3"</span>, <span class="param">"audio"</span>)</code></pre>
            
            <p><strong>Detalhes do Método:</strong></p>
            <p>O método verifica o sistema operacional e seleciona a versão correta do FFmpeg (seja 'ffmpeg' ou 'ffmpeg.exe'). Ele mapeia a resolução desejada para os filtros de FFmpeg e constrói o comando para executar o download. O processo é gerenciado utilizando a biblioteca <code>subprocess</code> para executar o comando FFmpeg e monitorar a saída.</p>
            
            <p><strong>Exceções Levantadas:</strong></p>
            <ul>
                <li><code>SyntaxError</code>: Se o parâmetro <code>type_playlist</code> não for uma string.</li>
                <li><code>ValueError</code>: Se o tipo de playlist especificado não for 'audio' ou 'video'.</li>
            </ul>
            
            <p><strong>Comando FFmpeg Gerado:</strong></p>
            <p>Dependendo dos parâmetros fornecidos, o comando FFmpeg gerado será semelhante a:</p>
            <pre><code>ffmpeg -y -i http://exemplo.com/playlist.m3u8 -map v:2 -c copy output/video.mp4</code></pre>

        </div>
        
        
            <div id="Como_obter_as_urls_de_streams" class="tab-content" style="display:none;">
                <h1>Como obter as URLs de streams?</h1>
                <h2>O que são HLS e M3U8?</h2>
                <p>
                    <strong>HLS (HTTP Live Streaming):</strong> HLS é um protocolo de streaming de mídia desenvolvido pela Apple. 
                    Ele divide o conteúdo de mídia em pequenos segmentos, que são transmitidos pela internet e reproduzidos em sequência. 
                    O HLS é amplamente utilizado para a transmissão de vídeo ao vivo e sob demanda, sendo compatível com uma variedade de dispositivos, 
                    incluindo smartphones, tablets e computadores.
                </p>
                <p>
                    <strong>M3U8:</strong> O M3U8 é um arquivo de playlist utilizado pelo HLS. 
                    Ele contém uma lista de URLs que apontam para os segmentos de mídia, geralmente em formato <code>.ts</code> (Transport Stream). 
                    O arquivo M3U8 é essencialmente um arquivo de texto que pode ser lido por players de mídia compatíveis com HLS.
                </p>
                
                <h2>Como obter as URLs de streams?</h2>
                <p>Existem diversas maneiras de capturar as URLs de streams HLS (arquivos <code>.m3u8</code>). Abaixo, listei uma das melhores para tráfegos m3u8:</p>
            
                <h3>1. Inspecionando a Rede no Navegador</h3>
                <ul>
                    <li>Abra o site que transmite o conteúdo de vídeo.</li>
                    <li>Pressione <code>F12</code> para abrir as ferramentas de desenvolvedor do seu navegador.</li>
                    <li>Vá para a aba <strong>Rede</strong> ou <strong>Network</strong>.</li>
                    <li>Recarregue a página e observe as solicitações de rede feitas pelo navegador.</li>
                    <li>Procure por um arquivo <code>.m3u8</code>. Geralmente, ele aparece como uma solicitação de tipo <code>text/plain</code> ou <code>application/vnd.apple.mpegurl</code>.</li>
                    <li>Clique com o botão direito na URL do arquivo <code>.m3u8</code> e copie-a.</li>
                </ul>
            
                <h3>2. Usando Extensões de Navegador</h3>
                <ul>
                    <li>Existem extensões específicas para navegadores, como o Chrome e Firefox, que facilitam a captura de URLs HLS. Extensões como <strong><a href="https://github.com/PauloCesar-dev404/M3u8Analyzer-Extension-">M3u8Analyzer</a></strong></li>
                    <li>Após instalar a extensão, acesse o site cujo tem o vídeo que deseja capturar.</li>
                    <li>A extensão identificará automaticamente as URLs das streams HLS e permitirá que você as copie.</li>
                </ul>
            
      
            </div>
            




        <div id="install" class="tab-content">
            <h1>Instalação da lib em seu ambiente usando Git</h1>
            <p>Para instalar a biblioteca, use o seguinte comando:</p>
            <pre><code><span class="func">pip</span> <span class="opens">install</span> <span class="string">gi+https://github.com/PauloCesar-dev404/M3u8Analyzer</span></code></pre>
        

            <h1>Instalação da lib em seu ambiente usando pypi</h1>
            <p>Para instalar a biblioteca, use o seguinte comando:</p>
            <pre><code><span class="func">pip</span> <span class="opens">install</span> <span class="string">m3u8-analyzer</span></code></pre>
        
        
        
        </div>

        <div id="get_m3u8" class="tab-content">
            <h1>Método:</h1>
            <h2><span class="func">get_m3u8</span><span class="opens">(</span><span class="param">url_m3u8</span>, <span class="param">headers</span>, <span class="param">save_in_file</span><span class="opens">)</span></h2>
            <p>Obtém o conteúdo de um arquivo M3U8 a partir de uma URL HLS. Lembre-se de que deve ser uma URL válida .m3u8.</p>
            <p><strong>Parâmetros:</strong></p>
            <ul>
                <li><code>url_m3u8</code> (str): A URL do arquivo M3U8.</li>
                <li><code>headers</code> (dict, opcional): Cabeçalhos HTTP a serem enviados com a solicitação.</li>
                <li><code>save_in_file</code> (str, opcional): O caminho para salvar o conteúdo M3U8 em um arquivo.</li>
            </ul>
            <p><strong>Retorno:</strong></p>
            <p><code>str</code>: O conteúdo do arquivo M3U8 como string.</p>
            <p><strong>Exemplo:</strong></p>
            <pre><code><span class="comment"># Obtendo o conteúdo do M3U8</span>
m3u8_content = <span class="func">get_m3u8</span>(<span class="param">"http://example.com/playlist.m3u8"</span>)
print(m3u8_content)

<span class="comment"># Salvando o conteúdo em um arquivo</span>
<span class="func">get_m3u8</span>(<span class="param">"http://example.com/playlist.m3u8"</span>, <span class="param">save_in_file="playlist.m3u8"</span>)</code></pre>
        </div>

        <div id="get_type_m3u8_content" class="tab-content">
            <h1>Método:</h1>
            <h2><span class="func">get_type_m3u8_content</span><span class="opens">(</span><span class="param">m3u8_content</span><span class="opens">)</span></h2>
            <p>Determina o tipo de conteúdo de um arquivo M3U8.</p>
            <p><strong>Parâmetros:</strong></p>
            <ul>
                <li><code>m3u8_content</code> (str): O conteúdo do arquivo M3U8.</li>
            </ul>
            <p><strong>Retorno:</strong></p>
            <p><code>str</code>: O tipo de conteúdo identificado.</p>
            <p><strong>Exemplo:</strong></p>
            <pre><code><span class="comment"># Exemplo de conteúdo M3U8</span>
m3u8_content = <span class="string">"""#EXTM3U
#EXT-X-STREAM-INF:BANDWIDTH=3000000,RESOLUTION=1920x1080
http://example.com/1080p.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=1500000,RESOLUTION=1280x720
http://example.com/720p.m3u8"""</span>

<span class="comment"># Determinando o tipo de conteúdo</span>
tipo = <span class="func">get_type_m3u8_content</span>(m3u8_content)
print(tipo)  <span class="comment"># Saída: 'Master'</span></code></pre>
        </div>

        <div id="get_high_resolution" class="tab-content">
            <h1>Método:</h1>
            <h2><span class="func">get_high_resolution</span><span class="opens">(</span><span class="param">m3u8_content</span><span class="opens">)</span></h2>
            <p>Obtém a maior resolução disponível em um arquivo M3U8 e o URL correspondente.</p>
            <p><strong>Parâmetros:</strong></p>
            <ul>
                <li><code>m3u8_content</code> (str): O conteúdo do arquivo M3U8.</li>
            </ul>
            <p><strong>Retorno:</strong></p>
            <p><code>Tuple[str, str]</code>: Uma tupla com a maior resolução e o URL correspondente.</p>
            <p><strong>Exemplo:</strong></p>
            <pre><code><span class="comment"># Exemplo de conteúdo M3U8</span>
m3u8_content = <span class="string">"""#EXTM3U
#EXT-X-STREAM-INF:BANDWIDTH=3000000,RESOLUTION=1920x1080
http://example.com/1080p.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=1500000,RESOLUTION=1280x720
http://example.com/720p.m3u8"""</span>

<span class="comment"># Obtendo a maior resolução</span>
resolucao, url = <span class="func">get_high_resolution</span>(m3u8_content)
print(<span class="string">f"Resolução: {resolucao}, URL: {url}"</span>)
<span class="comment"># Saída: Resolução: 1920x1080, URL: http://example.com/1080p.m3u8</span></code></pre>
        </div>

        <div id="get_player_playlist" class="tab-content">
            <h1>Método:</h1>
            <h2><span class="func">get_player_playlist</span><span class="opens">(</span><span class="param">m3u8_url</span><span class="opens">)</span></h2>
            <p>Obtém o caminho do diretório base do arquivo M3U8.</p>
            <p><strong>Parâmetros:</strong></p>
            <ul>
                <li><code>m3u8_url</code> (str): A URL completa do arquivo M3U8.</li>
            </ul>
            <p><strong>Retorno:</strong></p>
            <p><code>str</code>: O caminho do diretório base.</p>
            <p><strong>Exemplo:</strong></p>
            <pre><code><span class="func"># URL do M3U8</span>
m3u8_url = <span class="string">"http://example.com/streams/1080p.m3u8"</span>

<span class="comment"># Obtendo o caminho do diretório base</span>
diretorio_base = <span class="func">get_player_playlist</span>(m3u8_url)
print(<span class="string">diretorio_base</span>)  <span class="comment"># Saída: http://example.com/streams/</span></code></pre>
        </div>

        <div id="get_audio_playlist" class="tab-content">
            <h1>Método:</h1>
            <h2><span class="func">get_audio_playlist</span><span class="opens">(</span><span class="param">m3u8_content</span><span class="opens">)</span></h2>
            <p>Extrai o URL da playlist de áudio do conteúdo M3U8.</p>
            <p><strong>Parâmetros:</strong></p>
            <ul>
                <li><code>m3u8_content</code> (str): O conteúdo do arquivo M3U8.</li>
            </ul>
            <p><strong>Retorno:</strong></p>
            <p><code>str</code>: A URL da playlist de áudio.</p>
            <p><strong>Exemplo:</strong></p>
            <pre><code><span class="comment"># Exemplo de conteúdo M3U8</span>
m3u8_content = <span class="string">"""#EXTM3U
#EXT-X-STREAM-INF:BANDWIDTH=3000000,RESOLUTION=1920x1080
http://example.com/1080p.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=1500000,RESOLUTION=1280x720
http://example.com/720p.m3u8
#EXT-X-MEDIA:TYPE=AUDIO,GROUP-ID="audio",NAME="English",DEFAULT=YES,AUTOSELECT=YES,LANGUAGE="eng",URI="http://example.com/audio/playlist.m3u8"""</span>

<span class="comment"># Obtendo o URL da playlist de áudio</span>
audio_playlist = <span class="func">get_audio_playlist</span>(m3u8_content)
print(audio_playlist)  <span class="comment"># Saída: http://example.com/audio/playlist.m3u8</span></code></pre>
        </div>

        <div id="remuxer_audio_and_video" class="tab-content">
            <h1>Método:</h1>
            <h2><span class="func">remuxer_audio_and_video</span><span class="opens">(</span><span class="param">videoPath</span>, <span class="param">audio_Path</span>, <span class="param">outputPath</span><span class="opens">)</span></h2>
            <p>Remuxa os arquivos de áudio e vídeo em um único arquivo de saída.</p>
            <p><strong>Parâmetros:</strong></p>
            <ul>
                <li><code>videoPath</code> (str): Caminho para o arquivo de vídeo.</li>
                <li><code>audio_Path</code> (str): Caminho para o arquivo de áudio.</li>
                <li><code>outputPath</code> (str): Caminho de saída para o arquivo remuxado (dir/nome.mp4)</li>
            </ul>
            <p><strong>Retorno:</strong></p>
            <p><code>None</code>: A função salva o arquivo no caminho especificado.</p>
            <p><strong>Exemplo:</strong></p>
            <pre><code><span class="comment"># Paths dos arquivos de vídeo e áudio</span>
videoPath = <span class="string">"video.mp4"</span>
audio_Path = <span class="string">"audio.mp3"</span>
outputPath = <span class="string">"output.mp4"</span>

<span class="comment"># Remuxando áudio e vídeo</span>
<span class="func">remuxer_audio_and_video</span>(video_url, audio_url, output_file)</code></pre>
        </div>
    </div>
    <script src="scripts/script.js"></script>
</body>
<footer style="text-align: center; padding: 20px 0; background-color: #f8f8f8; text-decoration: none;">
    <p><a href="https://github.com/PauloCesar-dev404" target="_top">© 2024 PauloCesar-dev404</a>|<a href="https://apoia.se/paulocesar-dev404" target="_top">Apoie o Dev Online</a></p>
</footer>

</html>
